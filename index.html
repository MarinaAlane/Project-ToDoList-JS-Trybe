<!DOCTYPE html>
<html lang='pt-br'>
<head>
    <meta charset='utf-8'>
    <link rel="stylesheet" href="style.css">
    <title>Projeto 4 -  To do List - Tiago Minoru Yoneda</title>
</head>
<body>
    <section class='headerContainer'>
    <!-- Requisito 1 -->
    <header>Minha Lista de Tarefas</header>

    <!-- Requisito 2 -->
    <p id='funcionamento'>Clique duas vezes em um item para marc√°-lo como completo</p>

    <!-- Requisito 3 -->
    <input id='texto-tarefa' placeholder='digite a nova tarefa'>

    <!-- Requisito 5 -->
    <button id='criar-tarefa'>add</button>
    </section>

    <section class='listContainer'>
        <!-- Requisito 4 -->
        <ol id='lista-tarefas'></ol>
    </section>
    <section class='buttonContainer'>
        <button id ='apaga-tudo'>Apaga Geral</button>
        <button id ='remover-finalizados'>Remover Finalizados</button>
        <button id ='salvar-tarefas'>Save</button>
    </section>
    <script src='script.js'></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            function stringToTask(string){
                let newString = string.split('+++');
                const newLi = document.createElement('li');
                newLi.innerText = newString[1];
                if (newString[0] === '1') {
                    newLi.classList.toggle('completed');
                }
                newLi.addEventListener('click', clicaTarefa);
                newLi.addEventListener('dblclick', doubleClick)
                document.querySelector('ol').appendChild(newLi);
            }

            function loadFromStorage() {
                const totalTasks = localStorage.getItem('totalTasks');
                if (totalTasks !== null){
                    for (let index = 0; index < totalTasks; index += 1) {
                        const newLi = localStorage.getItem(`task${index}`);
                        stringToTask(newLi);
                    }
                }
            }
            loadFromStorage();
        });

    </script>
</body>
</html>
